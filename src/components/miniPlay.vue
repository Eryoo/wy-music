<template>
    <div class="miniPlay" v-if="songInfo && songInfo.al">
        <div class="icon">
            <img v-if="songInfo && songInfo.al" :class="{'play':playStatus}" class="picUrl" :src="songInfo.al.picUrl" alt="">
            <svg v-else t="1618881349401" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3421" width="32" height="32"><path d="M703.564889 37.090342A511.683556 511.683556 0 1 0 986.909658 703.877975 511.683556 511.683556 0 0 0 703.564889 37.090342zM345.3864 927.739531A447.723111 447.723111 0 1 1 927.426445 678.6136 447.723111 447.723111 0 0 1 345.3864 927.739531z" fill="#2c2c2c" p-id="3422"></path><path d="M535.668722 452.833231a63.960444 63.960444 0 1 0 35.498047 83.148578 63.960444 63.960444 0 0 0-35.498047-83.148578z m-35.817849 89.22482a31.980222 31.980222 0 1 1 41.574289-17.908924 31.980222 31.980222 0 0 1-41.574289 17.589122z" fill="#2c2c2c" p-id="3423"></path><path d="M582.999451 333.866804a191.881333 191.881333 0 1 0 106.813943 249.445734 191.881333 191.881333 0 0 0-106.813943-249.445734z m-118.966426 296.776463a127.920889 127.920889 0 1 1 166.297155-71.315896 127.920889 127.920889 0 0 1-165.977353 71.635698zM749.296607 607.937309a15.990111 15.990111 0 0 0-29.741607-11.832682 223.861556 223.861556 0 0 1-119.606031 122.484251 15.990111 15.990111 0 0 0 12.472287 29.421804A255.841778 255.841778 0 0 0 749.296607 607.937309zM859.308571 633.841289a15.990111 15.990111 0 0 0-20.787144 8.954462 351.782445 351.782445 0 0 1-188.043707 191.881333 15.990111 15.990111 0 0 0 12.472287 29.421805 383.762667 383.762667 0 0 0 204.033818-209.470456 15.990111 15.990111 0 0 0-7.675254-20.787144z" fill="#2c2c2c" p-id="3424"></path><path d="M799.505556 610.175924a15.990111 15.990111 0 0 0-20.787145 8.954463 287.822 287.822 0 0 1-153.824869 157.662495 15.990111 15.990111 0 0 0 12.472287 29.421805 319.802222 319.802222 0 0 0 170.134782-174.612014 15.990111 15.990111 0 0 0-7.995055-21.426749zM432.052802 285.256866a15.990111 15.990111 0 0 0-21.106946-8.314857A255.841778 255.841778 0 0 0 274.390307 416.055975a15.990111 15.990111 0 0 0 29.741606 11.832683 223.861556 223.861556 0 0 1 119.606032-122.484252 15.990111 15.990111 0 0 0 8.314857-20.14754zM381.843853 167.889451a15.990111 15.990111 0 0 0-21.106946-7.675253 383.762667 383.762667 0 0 0-204.033818 209.470455 15.990111 15.990111 0 1 0 29.741607 11.832682 351.782445 351.782445 0 0 1 188.043706-191.881333 15.990111 15.990111 0 0 0 7.355451-21.746551z" fill="#2c2c2c" p-id="3425"></path><path d="M398.473569 247.520204a15.990111 15.990111 0 1 0-12.472287-29.421804 319.802222 319.802222 0 0 0-170.134782 174.612013 15.990111 15.990111 0 1 0 29.741607 11.832682 287.822 287.822 0 0 1 153.824869-157.662495z" fill="#2c2c2c" p-id="3426"></path></svg>
        </div>
        <div class="name" @click="goToPlay">{{songInfo.name}}</div>
        <div class="playHanled">
            <div @click="playHandle" v-if="!playStatus">
                <svg t="1619167418084" class="icon" viewBox="0 0 1085 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3234" width="30" height="30"><path d="M546.904228 18.10573c-277.76918 0-502.94529 225.17611-502.94529 502.94529 0 277.77164 225.17488 502.94775 502.94529 502.94775 277.76795 0 502.94529-225.17611 502.94529-502.94775C1049.849518 243.28307 824.672178 18.10573 546.904228 18.10573L546.904228 18.10573zM546.904228 973.701659c-249.992631 0-452.651868-202.659237-452.651868-452.651868 0-249.990172 202.659237-452.649408 452.651868-452.649408s452.650638 202.659237 452.650638 452.649408C999.554866 771.042422 796.896859 973.701659 546.904228 973.701659L546.904228 973.701659zM775.203924 485.406478c-78.267962-53.25591-220.1919-132.967608-301.004232-182.358388-33.132146-20.893592-60.993549-12.502952-63.667043 24.399633-1.938099 98.840588 0 289.550264 0 390.101445 1.681079 37.462125 34.709926 42.403293 63.37559 27.362121 80.72133-48.906255 219.456505-132.95777 300.588574-182.112436C773.968017 562.476656 836.097862 528.305364 775.203924 485.406478L775.203924 485.406478z" p-id="3235" fill="#515151"></path></svg>
            </div>
                <div v-else @click="pausedHanle">
                    <svg t="1619167374841" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2894" width="30" height="30"><path d="M500.864 952.64c-239.648 0-434.656-194.976-434.656-434.624 0-239.68 195.008-434.624 434.656-434.624 239.68 0 434.656 194.944 434.656 434.624 0 239.68-195.008 434.624-434.656 434.624m0-933.28C225.92 19.36 2.24 243.104 2.24 518.016 2.24 792.96 225.92 1016.64 500.864 1016.64s498.656-223.68 498.656-498.624c0-274.912-223.68-498.624-498.656-498.624" p-id="2895" fill="#515151"></path><path d="M404.864 326.016a32 32 0 0 0-32 32v320a32 32 0 0 0 64 0v-320a32 32 0 0 0-32-32M596.864 326.016a32 32 0 0 0-32 32v320a32 32 0 0 0 64 0v-320a32 32 0 0 0-32-32" p-id="2896" fill="#515151"></path></svg>
                </div>       
        </div>
        <div class="list">
            <svg t="1619167466375" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5008" width="30" height="30"><path d="M324.18816 319.54944c0 44.55424-36.12672 80.67072-80.67072 80.67072-44.544 0-80.67072-36.11648-80.67072-80.67072s36.12672-80.67072 80.67072-80.67072C288.06144 238.86848 324.18816 274.98496 324.18816 319.54944zM243.5072 648.41728c-44.544 0-80.67072 36.11648-80.67072 80.67072s36.12672 80.67072 80.67072 80.67072c44.55424 0 80.67072-36.11648 80.67072-80.67072S288.06144 648.41728 243.5072 648.41728zM444.9792 294.35904l392.32512 0c13.16864 0 23.8592-10.68032 23.8592-23.8592 0-13.17888-10.68032-23.8592-23.8592-23.8592L444.9792 246.64064c-13.16864 0-23.8592 10.68032-23.8592 23.8592C421.12 283.67872 431.81056 294.35904 444.9792 294.35904zM444.9792 411.00288l254.49472 0c13.17888 0 23.8592-10.68032 23.8592-23.8592s-10.68032-23.8592-23.8592-23.8592L444.9792 363.28448c-13.16864 0-23.8592 10.67008-23.8592 23.8592S431.81056 411.00288 444.9792 411.00288zM837.30432 662.82496 444.9792 662.82496c-13.16864 0-23.8592 10.68032-23.8592 23.8592 0 13.17888 10.69056 23.8592 23.8592 23.8592l392.32512 0c13.16864 0 23.8592-10.68032 23.8592-23.8592C861.16352 673.49504 850.47296 662.82496 837.30432 662.82496zM699.47392 779.45856 444.9792 779.45856c-13.16864 0-23.8592 10.67008-23.8592 23.8592s10.69056 23.8592 23.8592 23.8592l254.49472 0c13.17888 0 23.8592-10.68032 23.8592-23.8592S712.64256 779.45856 699.47392 779.45856z" p-id="5009" fill="#515151"></path></svg>
        </div>
    </div>
</template>
<script lang="ts" setup>
import {  computed } from "vue"
import { useStore ,mapGetters} from "vuex"
import { useRouter } from 'vue-router'
import {pausedHanle ,playHandle} from "./audio"

const Store = useStore()
const songInfo = computed(() =>{
    return Store.getters['play/getSongInfo']
})
const playStatus = computed(()=>{
    return Store.getters['play/getPlayStatus']
})
const Router = useRouter()

function goToPlay (){
    Router.push({
        path:'/play',
        query:{
            songid:songInfo.value.id
        }
    })
}
</script>
<style scoped lang='scss'>
.miniPlay{
    position: fixed;
    bottom: 50px;
    width: 100%;
    left: 0;
    z-index: 5;
    background: #ffffff;
    display: flex;
    height: 50px;
    align-items: center;
    font-size: 14px;
    padding: 0 20px 10px;
    .name{
        width: 200px;
        margin-left: 10px;
        white-space:nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        color: #999;
    }
    .icon {
            width: 40px;
            height: 40px;
            border-radius: 40px;
            overflow: hidden;
            img.picUrl{
                width: 100%;
                height:100%;
            }
        }
    .playHanled{
        margin-right: 10px;
    }
}
.play{
     animation:turn 5s linear infinite;      
}
@keyframes turn {
      0%{-webkit-transform:rotate(0deg);}
      25%{-webkit-transform:rotate(90deg);}
      50%{-webkit-transform:rotate(180deg);}
      75%{-webkit-transform:rotate(270deg);}
      100%{-webkit-transform:rotate(360deg);}
}


</style>